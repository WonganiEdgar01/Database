<%- include ('partials/header') %>

<section>
  <h2><i class="fas fa-plus"></i>Create New Post</h2>

  <% if (typeof error !== 'undefined') { %>
    <div class="error-message">
      <i class="fas fa-exclamation-triangle"></i>
      <p><%= error %></p>
    </div>
  <% } %>
  
  <form action="/posts" method="POST" class="post-form" enctype="multipart/form-data">
    <div class="form-group">
      <label for="title">Title:</label>
      <input type="text" id="title" name="title" value="<%= typeof title !== 'undefined' ? title : '' %>" required>
    </div>

    <div class="form-group">
      <label for="image">Blog Image:</label>
      <input type="file" id="image" name="image" accept="image/*">
      <small>Select an image for your blog post (JPG, PNG, or GIF, max 5MB)</small>
    </div>

    <div class="form-group">
      <label for="content">Content:</label>
      <textarea id="content" name="content" rows="10" required><%= typeof content !== 'undefined' ? content : (typeof post !== 'undefined' && post.content ? post.content : '') %></textarea>  
    </div>
    
    <div class="form-actions">
      <button type="submit" class="btn primary"><i class="fas fa-check"></i>Create Post</button>
      <a href="/" class="btn secondary"><i class="fas fa-times"></i>Cancel</a>
    </div>
  </form>
</section>

<%- include('partials/footer') %>