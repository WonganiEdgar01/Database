<%- include ('partials/header') %>
  <%- include('partials/navigation') %>

  <section>
    <h2><i class="fas fa-edit"></i>Edit Post</h2>

    <% if (typeof error !== 'undefined') { %>
      <div class="error-message">
        <i class="fas fa-exclamation-triangle"></i>
        <p><%= error %></p>
      </div>
    <% } %>
    
    <!-- Image upload field with preview and remove option -->
<form action="/posts/<%= post.id %>?_method=PUT" method="POST" enctype="multipart/form-data">
  <!-- ... other fields ... -->
  <div class="form-group">
    <label for="image">Blog Image:</label>
    <% if (post.image && post.image !== 'default.jpg') { %>
      <div>
        <img src="/images/<%= post.image %>" alt="Current image" style="max-width: 200px; margin-bottom: 10px;">
      </div>

    <% } %>
    <input type="file" id="image" name="image" accept="image/*">
    <small>Select a new image for your blog post (JPG, PNG, or GIF, max 5MB)</small>
  </div>

</form>

    <form action="/posts/<%= post.id %>?_method=PUT" method="POST" class="post-form">
      <div class="form-group">
        <label for="title">Title:</label>
        <input type="text" id="title" name="title" value="<%= typeof post.title !== 'undefined' ? post.title : '' %>" required>
      </div>

      <div class="form-group">
        <label for="content">Content:</label>
        <textarea id="content" name="content" rows="10" required><%= typeof post.content !== 'undefined' ? post.content : '' %></textarea>
      </div>

      <div class="form-actions">
        <button type="submit" class="btn primary"><i class="fas fa-check"></i>Update Post</button>
        <a href="/" class="btn secondary"><i class="fas fa-times"></i>Cancel</a>
      </div>
    </form>
  </section>
<%- include('partials/footer') %>